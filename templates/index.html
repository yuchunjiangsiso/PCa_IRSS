<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initial Risk Stratification System for Clinically Localized Prostate Cancer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6B7280',
                        preset: '#36D399', // 预设按钮颜色
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .form-section {
                @apply rounded-lg p-5 mb-6 border shadow-sm;
            }
            .input-field {
                @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary/50 focus:border-primary transition duration-200;
            }
            .radio-label {
                @apply flex items-center py-1.5 px-2 rounded hover:bg-gray-100 transition cursor-pointer;
            }
            .radio-input {
                @apply h-4 w-4 text-primary focus:ring-primary border-gray-300;
            }
            .preset-btn {
                @apply px-6 py-3 bg-preset text-white rounded-md shadow hover:bg-preset/90 focus:outline-none focus:ring-2 focus:ring-preset/50 transition duration-200 text-base font-medium;
            }
            .reset-btn {
                @apply px-6 py-3 bg-secondary text-white rounded-md shadow hover:bg-preset/90 focus:outline-none focus:ring-2 focus:ring-preset/50 transition duration-200 text-base font-medium;
            }
            .loading-spinner {
                @apply inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2;
            }
        }

    </style>
</head>
<body class="bg-gray-50 font-inter min-h-screen p-4">
    <div class="max-w-7xl mx-auto w-full">
        <!-- 标题区域 -->
        <div class="text-center mb-6 sm:mb-8">
            <h2 class="text-[clamp(1.2rem,5vw,2rem)] font-bold text-gray-800 mb-2">Initial Risk Stratification System for Clinically Localized Prostate Cancer</h2>
            <p class="text-gray-600 text-sm sm:text-base max-w-2xl mx-auto">Please enter the patient's clinical and pathological features, and the system will automatically assess the risk level.</p>
        </div>

        <!-- 表单容器 -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <form action="/result" id="riskAssessmentForm" class="p-4 sm:p-6">
                <!-- 响应式网格布局：小屏幕1列，中等屏幕2列，大屏幕3列 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- cTNM部分 -->
                    <div class="form-section bg-blue-50 border-blue-100">
                        <h3 class="text-base sm:text-lg font-semibold text-blue-700 mb-4 flex items-center">
                            <i class="fa fa-stethoscope mr-2"></i> Clinical T-Staging
                        </h3>
                        <div class="space-y-1">
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT0_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT0</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT1a_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT1a</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT1b_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT1b</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT1c_1" class="radio-input" data-preset="true">
                                <span class="ml-2 text-gray-700">cT1c</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT2a_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT2a</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT2b_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT2b</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT2c_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT2c</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT3a_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT3a</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT3b_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT3b</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="cT4_1" class="radio-input">
                                <span class="ml-2 text-gray-700">cT4</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="cTNM" value="None" class="radio-input">
                                <span class="ml-2 text-gray-700">None</span>
                            </label>
                        </div>
                    </div>

                    <!-- Grade Group部分 -->
                    <div class="form-section bg-green-50 border-green-100">
                        <h3 class="text-base sm:text-lg font-semibold text-green-700 mb-4 flex items-center">
                            <i class="fa fa-flask mr-2"></i> Grade Group
                        </h3>
                        <div class="space-y-1">
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="GradeGroup1_1" class="radio-input" data-preset="true">
                                <span class="ml-2 text-gray-700">Grade Group 1</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="GradeGroup2_1" class="radio-input">
                                <span class="ml-2 text-gray-700">Grade Group 2</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="GradeGroup3_1" class="radio-input">
                                <span class="ml-2 text-gray-700">Grade Group 3</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="GradeGroup4_1" class="radio-input">
                                <span class="ml-2 text-gray-700">Grade Group 4</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="GradeGroup5_1" class="radio-input">
                                <span class="ml-2 text-gray-700">Grade Group 5</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="GradeGroup" value="None" class="radio-input">
                                <span class="ml-2 text-gray-700">None</span>
                            </label>
                        </div>
                    </div>

                    <!-- 输入框部分 -->
                    <div class="form-section bg-purple-50 border-purple-100">
                        <h3 class="text-base sm:text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fa fa-database mr-2"></i> Quantitative Parameters
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">PSA Value (ng/mL):</label>
                                <input type="number" name="PSAValue" class="input-field" data-preset-value="8">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Positive Prostate Biopsy Cores:</label>
                                <input type="number" name="BiopsyCoresPositive" class="input-field" data-preset-value="3">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cancer Percentage in Each Core (%):</label>
                                <input type="number" name="CancerPercentage" class="input-field" data-preset-value="35">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">PSA Density (ng/mL/g):</label>
                                <input type="number" step="0.01" name="PSADensity" class="input-field" data-preset-value="0.12">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Percentage of Positive Biopsy Cores (%):</label>
                                <input type="number" name="PositiveBiopsyCoresPercentage" class="input-field">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 提交按钮和预设按钮组 -->
                <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
                     <button type="button" id="resetValue" class="reset-btn flex items-center w-full sm:w-auto">
                        <i class="fa fa-undo mr-2"></i> Reset Input
                    </button>
                    <button type="button" id="presetVeryLowRisk" class="preset-btn flex items-center w-full sm:w-auto">
                        <i class="fa fa-user-plus mr-2"></i> Very Low Risk Patient Example
                    </button>
                    <button type="submit" id="submitBtn" class="w-full sm:w-auto px-6 py-3 bg-primary text-white rounded-md shadow hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/50 transition duration-300 text-base font-medium">
                        <i class="fa fa-check-circle mr-2"></i> Submit for Risk Assessment
                    </button>
                </div>
            </form>
        </div>

        <!-- 页脚说明 -->
        <div class="mt-5 text-center text-xs sm:text-sm text-gray-500">
            <p>The data will be processed through the PCaO2 ontology for risk assessment. | The assessment results are for clinical reference only.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取表单和提交按钮
            const form = document.getElementById('riskAssessmentForm');
            const submitBtn = document.getElementById('submitBtn');
            const originalBtnContent = submitBtn.innerHTML;

            // 获取预设按钮
            const presetBtn = document.getElementById('presetVeryLowRisk');

            // 点击预设按钮时执行
            presetBtn.addEventListener('click', function() {
                // 设置cTNM为cT1c_1
                document.querySelector('input[name="cTNM"][value="cT1c_1"]').checked = true;

                // 设置GradeGroup为GradeGroup1_1
                document.querySelector('input[name="GradeGroup"][value="GradeGroup1_1"]').checked = true;

                // 设置数值参数
                document.querySelector('input[name="PSAValue"]').value = '8';
                document.querySelector('input[name="BiopsyCoresPositive"]').value = '2';
                document.querySelector('input[name="CancerPercentage"]').value = '35';
                document.querySelector('input[name="PSADensity"]').value = '0.12';

                // 添加视觉反馈
                presetBtn.classList.add('animate-pulse');
                setTimeout(() => {
                    presetBtn.classList.remove('animate-pulse');
                }, 800);
            });

            // 获取重置按钮
            const resetBtn = document.getElementById('resetValue');

            // 点击重置按钮时执行
            resetBtn.addEventListener('click', function() {
                // 取消所有cTNM相关radio的选中状态
                document.querySelectorAll('input[name="cTNM"]').forEach(radio => {
                    radio.checked = false;
                });

                // 取消所有GradeGroup相关radio的选中状态
                document.querySelectorAll('input[name="GradeGroup"]').forEach(radio => {
                    radio.checked = false;
                });

                // 清空数值参数输入框
                document.querySelector('input[name="PSAValue"]').value = '';
                document.querySelector('input[name="BiopsyCoresPositive"]').value = '';
                document.querySelector('input[name="CancerPercentage"]').value = '';
                document.querySelector('input[name="PSADensity"]').value = '';
                document.querySelector('input[name="PositiveBiopsyCoresPercentage"]').value = '';

                // 添加视觉反馈
                resetBtn.classList.add('animate-pulse');
                setTimeout(() => {
                    resetBtn.classList.remove('animate-pulse');
                }, 800);
            });

            // 表单提交事件处理
            form.addEventListener('submit', function(e) {
                // 禁用提交按钮
                submitBtn.disabled = true;
                // 修改按钮文本显示加载状态
                submitBtn.innerHTML = '<span class="loading-spinner"></span> Processing...';
                // 添加加载样式
                submitBtn.classList.add('opacity-75', 'cursor-not-allowed');
                // 移除悬停效果
                submitBtn.classList.remove('hover:bg-primary/90');

                // 这里表单会正常提交，无需额外的submit()调用
            });
        });
    </script>
</body>
</html>
